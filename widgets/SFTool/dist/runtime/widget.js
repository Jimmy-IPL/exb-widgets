System.register(["jimu-core"],(function(e,t){var n={};return{setters:[function(e){n.React=e.React,n.jsx=e.jsx}],execute:function(){e((()=>{var e,t,o,r,i={244:e=>{"use strict";e.exports=n}},l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return i[e].call(n.exports,n,n.exports,s),n.exports}s.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var r=Object.create(null);s.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,s.d(r,i),r},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>{if("vendors-node_modules_plotly_js-dist-min_plotly_min_js"===e)return"widgets/chunks/vendors-node_modules_plotly_js-dist-min_plotly_min_js.js"},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="exb-client:",s.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var l,a;if(void 0!==n)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==r+n){l=c;break}}l||(a=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",r+n),l.src=e),o[e]=[t];var f=(t,n)=>{l.onerror=l.onload=null,clearTimeout(v);var r=o[e];if(delete o[e],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(n))),t)return t(n)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),a&&document.head.appendChild(l)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="",(()=>{var e={"widgets/SFTool/dist/runtime/widget":0};s.f.j=(t,n)=>{var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var i=s.p+s.u(t),l=new Error;s.l(i,(n=>{if(s.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,o[1](l)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,r,[i,l,a]=n,u=0;if(i.some((t=>0!==e[t]))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(a)a(s)}for(t&&t(n);u<i.length;u++)r=i[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkexb_client=self.webpackChunkexb_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(a),s.d(a,{__set_webpack_public_path__:()=>o,default:()=>n});var e=s(244),t=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function l(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}a((o=o.apply(e,t||[])).next())}))};function n(n){const o=e.React.useRef(null),[r,i]=e.React.useState("https://mygishub.interpipeline.com/notebook/rest/services/8d125aad8152431282c8285bad359241/GPServer/SFWebToolTest"),[l,a]=e.React.useState("123"),[u,d]=e.React.useState("456"),[c,f]=e.React.useState("50"),[v,p]=e.React.useState(!1),[h,m]=e.React.useState("");return(0,e.jsx)("div",{style:{width:"100%",height:"100%",padding:8,boxSizing:"border-box"}},(0,e.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"}},(0,e.jsx)("input",{style:{width:420},value:r,onChange:e=>i(e.target.value),placeholder:"Task URL .../GPServer/<ToolName>"}),(0,e.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:"LS"}),(0,e.jsx)("input",{value:u,onChange:e=>d(e.target.value),placeholder:"Weld"}),(0,e.jsx)("input",{value:c,onChange:e=>f(e.target.value),placeholder:"Extent(m)"}),(0,e.jsx)("button",{onClick:function(){return t(this,void 0,void 0,(function*(){var e;p(!0),m("");try{const e=yield function(){return t(this,void 0,void 0,(function*(){var e,t;const n=`${window.location.origin}/portal/sharing/rest/generateToken`,o=new URLSearchParams;o.set("f","json"),o.set("client","referer"),o.set("referer",window.location.origin),o.set("expiration","60");const r=yield fetch(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}),i=yield r.json();if(!(null==i?void 0:i.token))throw new Error(null!==(t=null===(e=null==i?void 0:i.error)||void 0===e?void 0:e.message)&&void 0!==t?t:"Failed to generate token");return i.token}))}(),n=yield function(e){return t(this,void 0,void 0,(function*(){var t;const n=`${r}/submitJob`,o=new URLSearchParams;o.set("f","json"),o.set("token",e),o.set("ls_number",l),o.set("weld_number",u),o.set("extent_m",c);const i=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}),s=yield i.json();if(null==s?void 0:s.error)throw new Error(null!==(t=s.error.message)&&void 0!==t?t:"submitJob error");if(!(null==s?void 0:s.jobId))throw new Error("No jobId returned");return s.jobId}))}(e);yield function(e,n){return t(this,void 0,void 0,(function*(){var t,o;const i=`${r}/jobs/${n}?f=json&token=${encodeURIComponent(e)}`;for(;;){const e=yield fetch(i),n=yield e.json();if(null==n?void 0:n.error)throw new Error(null!==(t=n.error.message)&&void 0!==t?t:"job status error");const r=(null!==(o=null==n?void 0:n.jobStatus)&&void 0!==o?o:"").toString();if(r.includes("Succeeded"))return;if(r.includes("Failed")||r.includes("Cancelled"))throw new Error(`Job ${r}`);yield new Promise((e=>setTimeout(e,1e3)))}}))}(e,n);const i=yield function(e,n){return t(this,void 0,void 0,(function*(){var t;const o=`${r}/jobs/${n}/results/result_json?f=json&token=${encodeURIComponent(e)}`,i=yield fetch(o),l=yield i.json();if(null==l?void 0:l.error)throw new Error(null!==(t=l.error.message)&&void 0!==t?t:"result_json fetch error");const s=null==l?void 0:l.value;if("string"!=typeof s)throw new Error("result_json is not a string");return s}))}(e,n),a=JSON.parse(i);yield function(e){return t(this,void 0,void 0,(function*(){var t,n,r,i;if(!o.current)return;const l=yield s.e("vendors-node_modules_plotly_js-dist-min_plotly_min_js").then(s.t.bind(s,708,23)),a=null!==(t=null==l?void 0:l.default)&&void 0!==t?t:l,u=null!==(n=e.data)&&void 0!==n?n:[],d=null!==(r=e.layout)&&void 0!==r?r:{margin:{l:0,r:0,b:0,t:40}},c=null!==(i=e.config)&&void 0!==i?i:{responsive:!0};yield a.newPlot(o.current,u,d,c)}))}(a)}catch(t){console.error(t),m(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:String(t))}finally{p(!1)}}))},disabled:v},v?"Running...":"Run")),h&&(0,e.jsx)("div",{style:{color:"red",marginTop:8}},"Fail: ",h),(0,e.jsx)("div",{style:{width:"100%",height:"calc(100% - 48px)",marginTop:8}},(0,e.jsx)("div",{ref:o,style:{width:"100%",height:"100%"}})))}function o(e){s.p=e}})(),a})())}}}));